import{r as x,j as e}from"./index-CsrQR31d.js";import{a as y}from"./ScreenerPage-DH2JNpun.js";import"./index-Ce2_9GLb.js";const C=x.memo(u=>{const{cvFiles:s,setCvFiles:d,jdText:f,weights:g,hardFilters:p,setAnalysisResults:o,setIsLoading:c,setLoadingMessage:h,onAnalysisStart:b,completedSteps:j}=u,[m,l]=x.useState(""),v=i=>{if(i.target.files){const a=Array.from(i.target.files);if(a.length>12){l("Chỉ được phép tải lên tối đa 12 CV mỗi lần."),d([]);return}l(""),d(a)}},N=async()=>{const a=["jd","weights"].filter(r=>!j.includes(r));if(a.length>0){const r=a.map(t=>t==="jd"?"Mô tả công việc":t==="weights"?"Phân bổ trọng số":t).join(", ");l(`Vui lòng hoàn thành các bước trước: ${r}.`);return}if(s.length===0){l("Vui lòng chọn ít nhất một tệp CV để phân tích.");return}l(""),c(!0),b(),o([]);try{const r=y(f,g,p,s);for await(const t of r)t.status==="progress"?h(t.message):o(n=>[...n,t])}catch(r){console.error("Lỗi phân tích CV:",r);const t=r instanceof Error?r.message:"Đã xảy ra lỗi không xác định. Vui lòng thử lại.";l(t),o(n=>n.some(w=>w.candidateName==="Lỗi Hệ Thống")?n:[...n,{id:`system-error-${Date.now()}`,status:"FAILED",error:t,candidateName:"Lỗi Hệ Thống",fileName:"N/A",jobTitle:"",industry:"",department:"",experienceLevel:"",detectedLocation:""}])}finally{c(!1),h("Hoàn tất phân tích!")}};return e.jsx("section",{id:"module-upload",className:"module-pane active w-full",children:e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-slate-900/50 via-slate-800/80 to-slate-900/50 border border-slate-700/50 rounded-3xl shadow-2xl backdrop-blur-xl",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 via-purple-500/5 to-pink-500/5"}),e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-radial from-blue-500/10 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-gradient-radial from-purple-500/10 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10 p-8 md:p-12 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center mb-4",children:e.jsx("i",{className:"fa-solid fa-file-import text-white text-2xl"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Tải lên CV ứng viên"}),e.jsx("p",{className:"text-slate-400 text-lg",children:"Chọn các file CV để bắt đầu quá trình phân tích thông minh"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"cv-files",className:"group block w-full cursor-pointer bg-gradient-to-br from-slate-800/50 via-slate-700/50 to-slate-800/50 border-2 border-dashed border-slate-600/50 hover:border-blue-500/50 rounded-2xl p-12 transition-all duration-300 hover:bg-gradient-to-br hover:from-blue-500/10 hover:via-purple-500/10 hover:to-pink-500/10",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center mx-auto group-hover:scale-110 transition-transform duration-300",children:e.jsx("i",{className:"fa-solid fa-cloud-arrow-up text-white text-3xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Kéo thả hoặc nhấp để chọn file"}),e.jsx("p",{className:"text-slate-400 mb-3",children:"Hỗ trợ định dạng: PDF, DOC, DOCX, TXT, JPG, PNG"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-500/20 border border-orange-500/30 rounded-xl text-orange-400 text-sm font-medium",children:[e.jsx("i",{className:"fa-solid fa-info-circle"}),e.jsx("span",{children:"Tối đa 12 CV mỗi lần phân tích"})]})]})]})}),e.jsx("input",{type:"file",id:"cv-files",multiple:!0,accept:".txt,.pdf,.doc,.docx,.jpg,.jpeg,.png",className:"hidden",onChange:v})]}),s.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white",children:[e.jsx("i",{className:"fa-solid fa-files text-blue-400"}),e.jsxs("h4",{className:"font-semibold",children:["Danh sách CV đã chọn (",s.length,"/12)"]})]}),e.jsx("div",{className:"grid gap-3 max-h-60 overflow-y-auto custom-scrollbar",children:s.map((i,a)=>e.jsxs("div",{className:"flex items-center p-4 bg-slate-800/50 border border-slate-700/50 rounded-xl hover:bg-slate-700/50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center mr-4",children:e.jsx("i",{className:"fa-regular fa-file-lines text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium truncate",children:i.name}),e.jsxs("p",{className:"text-slate-400 text-sm",children:[(i.size/1024).toFixed(1)," KB"]})]}),e.jsx("div",{className:"text-green-400",children:e.jsx("i",{className:"fa-solid fa-check-circle"})})]},a))})]}),m&&e.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-500/30 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),e.jsx("span",{className:"font-medium",children:"Lỗi"})]}),e.jsx("p",{className:"text-red-300 text-sm mt-1",children:m})]}),e.jsxs("button",{id:"analyze-button",onClick:N,disabled:s.length===0,className:`w-full h-16 font-bold text-xl rounded-2xl focus:outline-none focus:ring-4 transition-all duration-300 flex items-center justify-center gap-4 group relative overflow-hidden ${s.length>0?"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-600 hover:to-purple-600 hover:shadow-2xl hover:shadow-blue-500/25 hover:-translate-y-1 focus:ring-blue-500/40 active:scale-95":"bg-gradient-to-r from-gray-600 to-gray-500 text-gray-300 cursor-not-allowed"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${s.length>0?"bg-white/20 group-hover:scale-110":"bg-gray-500/20"} transition-all duration-300`,children:e.jsx("i",{className:"fa-solid fa-rocket text-2xl"})}),e.jsx("span",{children:"Bắt đầu Phân tích CV với AI"}),s.length>0&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"})]})]})]})})});C.displayName="CVUpload";export{C as default};
